<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <title>Hangmanonfire</title>
</head>

<body>
    <div class="container ">
        <nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse">
            <a id="home" class="navbar-brand" href="#">Hangmanonfire</a>
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" id="newGame" href="#">Reset</a>
                </li>
            </ul>
        </nav>
        <div id="game">
            <br>
            <br>
            <div class="row">
                <div class="col-xl-5 offset-1">
                    <h1>Take a guess</h1>
                    <h2 id="word">Word: </h2>
                    <h3>Number of misses left <span id="misses">0</span>/7</h3>
                </div>
                <div id="letterContainer" class="col-xl-5">
                    <br>
                </div>
            </div>
            <div class="row deadman" id="hangman">
                <div class="col-xl-1 offset-6">
                    <h1>&nbsp;|</h1>
                </div>
            </div>
            <div class="row deadman" id="rope">
                <div class="col-xl-1 offset-6">
                    <h1>&nbsp;|</h1>
                </div>
            </div>
            <div class="row deadman" id="head">
                <div class="col-xl-1 offset-6">
                    <h1> O</h1>
                </div>
            </div>
            <div class="row deadman" id="neck">
                <div class="col-xl-1 offset-6">
                    <h1>&nbsp;|</h1>
                </div>
            </div>
            <div class="row deadman" id="torso">
                <div class="col-xs-1 offset-6">
                    <h1>&nbsp;/|\</h1>
                </div>
            </div>
            <div class="row " id="legs">
                <div class="col-xs-1 offset-6 deadman" id="leg1">
                    <h1>&nbsp;/</h1>
                </div>
                <div class="col-xs-1 deadman" id="leg2">
                    <h1>&nbsp;\</h1>
                </div>
            </div>
            <div class="row ">
                <div class="col-xl-9 offset-3">
                    <h1 id="winlose"></h1>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
</body>
<script type="text/javascript" src="./dictionary.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var worded;
    var correctArray = [];
    var misses = 0;
    reset();
    for (var i = 65; i <= 90; i++) {
        let letter = String.fromCharCode(i);
        $("#letterContainer").append('<span ' + 'id="' + letter + '" class="badge badge-default gameOver" style="background-color: black" style="position: absolute">' + "&nbsp; " + letter + " &nbsp;" + '</span> ');
    }

    function reset() {
        $(".reset").remove();
        $(".gameOver").css('visibility', 'visible');
        $(".mesigi").remove();
        $(".deadman").hide();
        $("#misses").text(0);
        correctArray = [];
        misses = 0;
        worded = randomWord();
        for (var i = 0; i < worded.length; i++) {
            $("#word").append('<span class="' + worded[i] + ' reset" >' + "_ " + '</span>');
        }
    }
    $(".badge").click(function() {
        let badge = $(this).text()[2].toLowerCase();
        let hits = 0;
        for (var i = worded.length - 1; i >= 0; i--) {
            // on correct answer    
            if (badge == worded[i]) {
                // replace the underscores with answer 
                $("." + worded[i]).text(worded[i]);
                hits++;
            }
        }
        if (hits == 0) {
            misses++;
            $("#misses").text(misses);
            switch (misses) {
                case 1:
                    $("#hangman").show();
                    break;
                case 2:
                    $("#rope").show();
                    break;
                case 3:
                    $("#head").show();
                    break;
                case 4:
                    $("#neck").show();
                    break;
                case 5:
                    $("#torso").show();
                    break;
                case 6:
                    $("#leg1").show();
                    break;
                case 7:
                    $("#leg2").show();
                    lose();
            }
        } else {
            correctArray.push(badge);
            var plswork = 0;
            for (var i = worded.length - 1; i >= 0; i--) {
                for (var j = correctArray.length - 1; j >= 0; j--) {
                    if (correctArray[j] == worded[i]) {
                        plswork++;
                    }
                }
            }
            if (plswork == worded.length) {
                win();
            }
        }
        $(this).css('visibility', 'hidden');
    });

    function lose() {
        $(".gameOver").css('visibility', 'hidden');
        $("#winlose").append(' <h1 class="mesigi" > YOU LOSE  the word was:  ' + worded + "<br>" + 'press reset to play again </h1>');
    };

    function win() {
        $(".gameOver").css('visibility', 'hidden');
        $("#winlose").append('<h1 class="mesigi" > YOU WIN  Press reset to play again  </h1>');
    };
    $("#newGame").click(reset);
});
</script>

</html>
