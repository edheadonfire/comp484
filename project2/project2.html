<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <title>Hangmanonfire</title>
</head>

<body>
    <div class="container ">
        <nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse">
            <a id="home" class="navbar-brand" href="#">Hangmanonfire</a>
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" id="newGame" href="#">New Game?</a>
                </li>
            </ul>
        </nav>
        <div id="welcome">
            <br>
            <br>
            <br>
            <div class="row ">
                <div class="col-xl-6 offset-3">
                    <h1>Welcome to Hangmanonfire</h1>
                </div>
            </div>
            <br>
            <br>
            <div class="row ">
                <div class="col-xl-2 offset-3"></div>
                <button id="startGame" type="button" class="btn btn bg-inverse"> <span style="color:white">Start Game</span></button>
            </div>
        </div>
        <div id="game" style="display: none;">
            <br>
            <br>
            <div class="row">
                <div class="col-xl-5 offset-1">
                    <h1>Take a guess</h1>
                    <h2 id="word">Word: </h2>
                    <h3>Number of misses left <span id="misses">0</span>/7</h3>
                </div>
                <div id="letterContainer" class="col-xl-5">
                    <br>
                </div>
            </div>
            <div class="row" id="hangman"></div>
            <div class="row" >
                <div class="col-xl-9 offset-3">
                    <h1 id="winlose"></h1>
                </div>
             </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
</body>
<script type="text/javascript" src="./dictionary.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var misses = 0;
    const WORD = randomWord();
    var numNeededToWin = 0;
    var correctArray = [];
    console.log(WORD);
    // when you click home it should return you back to when you load the page

    // when you click start game it should start the game
    $("#startGame").click(function() {
        $("#welcome").hide();
        $("#game").show();
        var misses = 0;
        // display all the underscores
        for (var i = 0; i < WORD.length; i++) {
            $("#word").append('<span class="' + WORD[i] + '" >' + "_ " + '</span>');
        }
        //show all the little letters to click on.
        for (var i = 97; i <= 122; i++) {
            let letter = String.fromCharCode(i);
            $("#letterContainer").append('<span ' + 'id="' + letter + '" class="badge badge-default gameOver" style="background-color: black" style="position: absolute">' + "&nbsp; " + letter + " &nbsp;" + '</span> ');


        }
        console.log(numNeededToWin);
        // maybe add stuff so that its graphically nice
        // idk prolly not

        $(".badge").click(function() {
            let badge = $(this).text()[2];
            let hits = 0;
            for (var i = WORD.length - 1; i >= 0; i--) {
                // on correct answer    
                if (badge == WORD[i]) {
                    console.log('correct');
                    // replace the underscores with answer 
                    $("." + WORD[i]).text(WORD[i]);
                    hits++;
                }
            }

            if (hits == 0) {
                console.log('wrong');
                misses++;
                $("#misses").text(misses);
                switch (misses) {
                    case 1:
                        $("#hangman").append('rope ');
                        break;
                    case 2:
                        $("#hangman").append('rope ');
                        break;
                    case 3:
                        $("#hangman").append('head ');
                        break;
                    case 4:
                        $("#hangman").append('neck ');
                        break;
                    case 5:
                        $("#hangman").append('torso ');
                        break;
                    case 6:
                        $("#hangman").append(' leg 1 ');
                        break;
                    case 7:
                        $("#hangman").append(' leg 2 ');
                        // here is where you will write code for displaying message
                        lose();
                }
            } else {
                correctArray.push(badge);
                var plswork = 0;
                for (var i = WORD.length - 1; i >= 0; i--) {
                    for (var j = correctArray.length - 1; j >= 0; j--) {
                       if(correctArray[j] == WORD[i]){
                        plswork++;
                       }
                    }
                }
                if (plswork == WORD.length) {
                    // console.log("you win");
                    // Win condtion 
                    win();
                }
            }
            $(this).css('visibility', 'hidden');
        })

        function lose(){
            $(".gameOver").remove();
            $("#winlose").append("YOU LOSE  the word was: " + WORD);
        }
        function win(){
            $(".gameOver").remove();
            $("#winlose").append("YOU WIN  please new game to play again ");
        }
    });

});
</script>

</html>
